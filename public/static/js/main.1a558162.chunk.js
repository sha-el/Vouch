(this["webpackJsonpvouch-admin"]=this["webpackJsonpvouch-admin"]||[]).push([[0],{132:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(1),i=t.n(a),o=t(31),c=t.n(o),s=t(22),u=t(6),l=t(30),d=t(8),j=t(4),b=t(15),p=t.n(b),h=t(32),f=t(50),O=t(36),m=t(111),g=Object(m.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&(n.forEach((function(e){return console.error(e)})),n.some((function(e){var n;return 401===(null===(n=e.extensions)||void 0===n?void 0:n.code)}))&&(localStorage.clear(),location.href="/")),t&&Object(j.E)({type:"error",title:"Unable to reach our servers",message:"Please check your internet connection"})})),v=function(){return new O.ApolloClient({link:Object(O.from)([g,Object(O.createHttpLink)({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APP_ID:"5f547b6100c5c29c0010daf7"}).AUTH_HOST||"/api/graphql",headers:{Token:sessionStorage.getItem("token")||localStorage.getItem("token")||""}})]),cache:new O.InMemoryCache})},x="/api/login",y="/api/logout",C=v(),S=t(28),w=t(62),P=t.n(w);function E(){var e=Object(S.a)(["\n  query UserListQuery($first: Int, $offset: Int, $email: String) {\n    userEdge(first: $first, offset: $offset, emailIContains: $email) {\n      count\n      edges {\n        id\n        email\n        firstName\n        middleName\n        lastName\n        applications\n        lastLogin\n        permissions\n        groups\n        image\n        defaultOrganization {\n          id\n          name\n        }\n        updatedAt\n      }\n    }\n  }\n"]);return E=function(){return e},e}function k(){var e=Object(S.a)(["\n  mutation RemoveUserFromApp($userId: String!, $app: String!) {\n    removeApplicationFromUser(userId: $userId, applicationId: $app) {\n      id\n    }\n  }\n"]);return k=function(){return e},e}function A(){var e=Object(S.a)(["\n  mutation AddUserToApp($userId: String!, $app: String!) {\n    addApplicationToUser(userId: $userId, applicationId: $app) {\n      id\n    }\n  }\n"]);return A=function(){return e},e}function I(){var e=Object(S.a)(["\n  query UserDropDownQuery($email: String!) {\n    userEdge(emailIContains: $email, first: 5) {\n      edges {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return I=function(){return e},e}function $(){var e=Object(S.a)(["\n  mutation UpdatePasswordMutation($userId: String!, $password: String!) {\n    updatePassword(userId: $userId, password: $password) {\n      id\n    }\n  }\n"]);return $=function(){return e},e}function N(){var e=Object(S.a)(["\n  mutation UpdateUserPermissionsMutation($userId: String!, $permissions: [String!]!) {\n    addPermissionToUser(userId: $userId, permission: $permissions) {\n      id\n    }\n  }\n"]);return N=function(){return e},e}function U(){var e=Object(S.a)(["\n  mutation AddGroupsToUserMutation($userId: String!, $groups: [String]!) {\n    addGroupToUser(userId: $userId, group: $groups) {\n      id\n    }\n  }\n"]);return U=function(){return e},e}function z(){var e=Object(S.a)(["\n  query Me {\n    me {\n      id\n      email\n      firstName\n      middleName\n      lastName\n      lastLogin\n      permissions\n      groupsEdge {\n        edges {\n          id\n          name\n          permissions\n          updatedAt\n        }\n      }\n      organizationEdge {\n        edges {\n          id\n          name\n          address\n          contact\n          gstCode\n          gstRate\n          hsnCode\n          amtPerPointSale\n          amtReady\n          features\n          updatedAt\n        }\n      }\n    }\n\n    currentOrganization {\n      id\n      name\n      address\n      contact\n      gstCode\n      gstRate\n      hsnCode\n      amtPerPointSale\n      amtReady\n      features\n      updatedAt\n    }\n  }\n"]);return z=function(){return e},e}function D(){var e=Object(S.a)(["\n  query UserDetails($id: ObjectId!) {\n    user(id: $id) {\n      id\n      email\n      firstName\n      middleName\n      lastName\n      lastLogin\n      permissions\n      groups\n      image\n      applications\n      groupsEdge {\n        edges {\n          id\n          name\n          permissions\n          updatedAt\n        }\n      }\n      applicationEdge {\n        edges {\n          id\n          name\n        }\n      }\n      permissions\n    }\n  }\n"]);return D=function(){return e},e}function L(){var e=Object(S.a)(["\n  mutation SignUp($user: UserMutationInput!, $password: String!) {\n    signUp(user: $user, password: $password) {\n      id\n    }\n  }\n"]);return L=function(){return e},e}function q(){var e=Object(S.a)(["\n  mutation AdduserMutation($user: UserMutationInput!) {\n    addUser(user: $user) {\n      id\n      email\n    }\n  }\n"]);return q=function(){return e},e}function B(){var e=Object(S.a)(["\n  mutation Login($email: String!, $password: String!, $application: String!) {\n    login(email: $email, password: $password, application: $application)\n  }\n"]);return B=function(){return e},e}P()(B());var T=P()(q()),R=P()(L()),_=P()(D()),F=P()(z()),G=P()(U()),M=P()(N()),V=P()($()),H=P()(I()),Q=P()(A()),K=P()(k()),W=P()(E());function J(e,n){return X.apply(this,arguments)}function X(){return(X=Object(h.a)(p.a.mark((function e(n,t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:t,application:new URLSearchParams(location.search).get("appId")||"5f547b6100c5c29c0010daf7"})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("token"),sessionStorage.removeItem("token"),localStorage.removeItem("user"),e.next=5,fetch(y,{method:"POST",headers:{"Content-Type":"application/json"}});case 5:return e.abrupt("return",location.href="/");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(h.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().query({query:F,errorPolicy:"all"});case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,t){n.data&&(localStorage.setItem("user",JSON.stringify(n.data.me)),localStorage.setItem("currentOrganization",JSON.stringify(n.data.currentOrganization)),e(n.data)),n.errors&&t(n.errors)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=t(17),te=new URLSearchParams(window.location.search).get("appName")||"Vouch",re=function(){var e=Object(h.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(n.email,n.password);case 3:if((t=e.sent).ok){e.next=7;break}return Object(j.E)({title:"Something went wrong",type:"error"}),e.abrupt("return",t);case 7:return Object(j.E)({title:"Login Success",type:"success"}),e.abrupt("return",t);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),ae=function(e){var n=e.onTabChange,t=Object(ne.b)({defaultValues:{email:"",password:"",saveSession:!1}}),i=t.handleSubmit,o=t.errors,c=t.control,s=a.useState(!1),u=Object(d.a)(s,2),l=u[0],b=u[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.g,{subtitle:"Login to ".concat(te),children:"Welcome back"}),Object(r.jsxs)(j.f,{children:[Object(r.jsxs)("form",{onSubmit:i((function(n){b(!0),re(n).then((function(){var n;null===(n=e.navigate)||void 0===n||n.call(e,"/dashboard"),b(!1)})).catch((function(){return b(!1)}))})),children:[Object(r.jsxs)(j.v,{gutter:[0,"10px 0"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Email is required"},control:c,name:"email",render:function(e){var n,t=e.onChange,a=e.value,i=e.onBlur;return Object(r.jsx)(j.p,{type:"text",label:"Email",placeholder:"Enter your email address",before:Object(r.jsx)(f.c,{}),value:a,onChange:function(e){var n=e.target.value;return t(n)},error:null===(n=o.email)||void 0===n?void 0:n.message,onBlur:i})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Password is required"},control:c,name:"password",render:function(e){var n,t=e.onChange,a=e.value,i=e.onBlur;return Object(r.jsx)(j.p,{type:"password",label:"Password",placeholder:"Enter your Password",before:Object(r.jsx)(f.a,{}),value:a,onChange:function(e){var n=e.target.value;return t(n)},error:null===(n=o.password)||void 0===n?void 0:n.message,onBlur:i})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:c,name:"saveSession",render:function(e){var n=e.onChange,t=e.value,a=e.onBlur;return Object(r.jsx)(j.i,{label:"Keep me signed in",checked:t,onChange:function(e){var t=e.target.checked;return n(t)},onBlur:a})}})})]}),Object(r.jsx)(j.v,{children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",loading:l,children:"Submit"})})]}),Object(r.jsx)(j.m,{color:"#6870a0"}),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.c,{style:{width:"50%"},flat:!0,type:"secondary",children:"Forget Password"}),Object(r.jsx)(j.c,{style:{width:"50%"},flat:!0,type:"primary",onClick:n,children:"Sign up"})]})]})]})},ie=function(e){var n=e.onTabChange,t=Object(ne.b)(),a=t.handleSubmit,i=t.errors,o=t.control,c=t.setError;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.g,{subtitle:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:"Enter your personal details"}),Object(r.jsx)("br",{}),Object(r.jsxs)("span",{children:["and start journey with ",te]})]}),children:"Hello Traveler"}),Object(r.jsx)(j.f,{children:Object(r.jsxs)("form",{onSubmit:a((function(e){var n,t;e.password===e.password2?(n={email:e.email},t=e.password,C.mutate({mutation:R,variables:{user:n,password:t},errorPolicy:"all"})).then((function(e){var n;e.data?Object(j.E)({title:"Sign up Success",message:"Your new account for ".concat(te," is ready. Please Login"),type:"success",callBack:function(){return e.data},duration:6e3}):Object(j.E)({title:null===(n=e.errors)||void 0===n?void 0:n.map((function(e){return e.message})).join(","),type:"error",message:"Please contact system admin for further details",duration:1e4})})).catch((function(){return Object(j.E)({title:"Error",type:"error",message:"Something went wrong",duration:1e4})})):c("password2",{message:"Error mismatch"})})),children:[Object(r.jsxs)(j.v,{gutter:[0,"10px 0"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Email is required"},control:o,name:"email",render:function(e){var n=e.onChange,t=e.value;return Object(r.jsx)(j.p,{type:"text",label:"Email",placeholder:"Enter your email address",before:Object(r.jsx)(f.c,{}),value:t,onChange:function(e){var t=e.target.value;return n(t)},error:i.email})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Password is required"},control:o,name:"password",render:function(e){var n=e.onChange,t=e.value,a=e.onBlur;return Object(r.jsx)(j.p,{type:"password",label:"Password",placeholder:"Enter your Password",before:Object(r.jsx)(f.a,{}),value:t,onChange:function(e){var t=e.target.value;return n(t)},error:i.password,onBlur:a})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Please confirm Password"},control:o,name:"password2",render:function(e){var n=e.onChange,t=e.value,a=e.onBlur;return Object(r.jsx)(j.p,{type:"password",label:"Password",placeholder:"Confirm Password",before:Object(r.jsx)(f.a,{}),value:t,onChange:function(e){var t=e.target.value;return n(t)},error:i.password,onBlur:a})}})})]}),Object(r.jsx)(j.v,{children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",children:"Submit"})}),Object(r.jsx)(j.m,{color:"#6870a0"}),Object(r.jsx)(j.c,{displayBlock:!0,flat:!0,type:"secondary",onClick:n,children:"Already has a account? Login"})]})})]})},oe=[{title:"Login",key:"login"},{title:"Signup",key:"signup"}],ce=function(e){var n=a.useState("login"),t=Object(d.a)(n,2),i=t[0],o=t[1];return localStorage.user&&(location.href="/dashboard"),Object(r.jsx)(j.v,{alignItems:"center",justifyContent:"center",style:{background:"#e7d9fb14",height:"100vh",boxShadow:"0px 8px 9px -5px rgba(0,0,0,0.2), 0px 15px 22px 2px rgba(0,0,0,0.14), 0px 6px 28px 5px rgba(0,0,0,0.12)"},children:Object(r.jsx)(j.j,{flex:"0 1 400px",children:Object(r.jsxs)(j.e,{children:[Object(r.jsx)(j.h,{image:"https://image.freepik.com/free-vector/clouds-background-with-stars-text-soace_1017-25499.jpg",height:"300px"}),Object(r.jsxs)(j.z,{titles:oe,activeKey:i,unMountOnChange:!1,children:[Object(r.jsx)(j.y,{title:"Login",children:Object(r.jsx)(ae,Object(l.a)({onTabChange:function(){return o("signup")}},e))},"login"),Object(r.jsx)(j.y,{title:"Sign Up",children:Object(r.jsx)(ie,{onTabChange:function(){return o("login")}})},"signup")]})]})})})},se=t(12),ue=t(114);function le(){var e=Object(S.a)(["\n  mutation CreateApplicationMutation($application: ApplicationMutationInput!) {\n    addApplication(application: $application) {\n      id\n      name\n      withOrganization\n      features\n      permissions\n      redirectUrl\n    }\n  }\n"]);return le=function(){return e},e}function de(){var e=Object(S.a)(["\n  query ApplicationListQuery($first: Int, $offset: Int, $name: String) {\n    applicationEdge(first: $first, offset: $offset, nameIContains: $name) {\n      count\n      edges {\n        id\n        name\n        withOrganization\n        features\n        permissions\n        redirectUrl\n        updatedAt\n      }\n    }\n  }\n"]);return de=function(){return e},e}var je=P()(de()),be=P()(le()),pe=function(e){return Object(r.jsx)(j.u,{content:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.A,{margin:"2px",children:e.children}),Object(r.jsx)(j.C,{overlay:"Copy to Clipboard",children:Object(r.jsx)(j.c,{onClick:function(){return function(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")?Object(j.E)({type:"info",title:"Copied to clipboard"}):Object(j.E)({type:"warning",title:"Failed to Copy"})}catch(t){Object(j.E)({type:"warning",title:"Failed to Copy"})}document.body.removeChild(n)}(e.children||"")},secondary:!0,flat:!0,icon:Object(r.jsx)(se.j,{}),shape:"circle"})})]}),position:"top",trigger:"onHover",children:Object(r.jsx)("span",{children:e.children})})};function he(e){var n=Math.floor(((new Date).getTime()-e.getTime())/1e3),t=n/31536e3;return t>1?Math.floor(t)+" years":(t=n/2592e3)>1?Math.floor(t)+" months":(t=n/86400)>1?Math.floor(t)+" days":(t=n/3600)>1?Math.floor(t)+" hours":(t=n/60)>1?Math.floor(t)+" minutes":Math.floor(n)+" seconds"}var fe,Oe=function(e){return Object(r.jsx)(j.C,{overlay:e.children.toLocaleString(),children:Object(r.jsxs)("span",{children:[he(e.children)," ago"]})})};!function(e){e.SUPER_USER="SUPER_USER",e.CAN_ADD_GROUP="CAN_ADD_GROUP",e.CAN_EDIT_GROUP="CAN_EDIT_GROUP",e.CAN_DELETE_GROUP="CAN_DELETE_GROUP",e.CAN_ADD_USER="CAN_ADD_USER"}(fe||(fe={}));var me=function(e){return Object(r.jsx)(j.a,{mode:"multiple",value:e.value||[],data:function(e){return Object.keys(fe).concat([e.toUpperCase()]).filter((function(n){return n.toLowerCase().includes(e.toLowerCase())}))},uniqueIdentifier:function(e){return e},listDisplayProp:function(e){return e},label:"Select Permissions",onChange:function(n){return e.onChange(n)},displayValue:function(e){return e},error:e.error})};var ge=function(e){return(n=e,C.mutate({mutation:be,variables:{application:n}})).then((function(){Object(j.E)({type:"success",title:"Application Added"})})).catch((function(){return Object(j.E)({type:"error",title:"Something went wrong"})}));var n},ve=function(e){var n,t=Object(ne.b)({defaultValues:e.application||{name:"",permissions:[],features:[]}}),a=t.handleSubmit,o=t.errors,c=t.control,s=i.a.useState(!1),u=Object(d.a)(s,2),l=u[0],b=u[1];return Object(r.jsxs)(j.e,{elevation:0,children:[Object(r.jsx)(j.g,{children:"Add Application"}),Object(r.jsx)("form",{onSubmit:a((function(n){var t;b(!0),n.id=null===(t=e.application)||void 0===t?void 0:t.id,ge(n).then((function(){b(!1),e.onCancel()})).catch((function(){return b(!1)}))})),children:Object(r.jsxs)(j.v,{gutter:[0,"10px 0"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Name is required"},control:c,name:"name",render:function(e){var n=e.onChange,t=e.value,a=e.onBlur;return Object(r.jsx)(j.p,{required:!0,label:"Name",onChange:function(e){return n(e.target.value)},value:t,error:o.name,onBlur:a})}})}),Object(r.jsxs)(j.j,{children:[Object(r.jsx)(ne.a,{control:c,name:"withOrganization",render:function(e){var n=e.onChange,t=e.value;return Object(r.jsx)(j.i,{checked:t,onChange:function(e){return n(e.target.checked)},label:"With Organization"})}}),Object(r.jsx)(j.A,{variant:"p",color:"error",children:null===(n=o.withOrganization)||void 0===n?void 0:n.message})]}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:c,name:"permissions",render:function(e){var n,t=e.onChange,a=e.value;return Object(r.jsx)(me,{value:a||[],onChange:function(e){return t(e)},error:null===(n=o.permissions)||void 0===n?void 0:n.join(",")})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:c,name:"features",render:function(e){var n,t=e.value,a=e.onChange;return Object(r.jsx)(j.a,{mode:"multiple",value:t||[],onChange:a,error:null===(n=o.features)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.message})).join(","),listDisplayProp:function(e){return e},uniqueIdentifier:function(e){return e},displayValue:function(e){return e},label:"Select Features",data:function(e){return[e.toUpperCase()]}})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:c,name:"redirectUrl",render:function(e){var n,t=e.onChange,a=e.value;return Object(r.jsx)(j.p,{label:"Redirect Url",value:a,onChange:t,error:null===(n=o.redirectUrl)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{offset:15,span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"danger",onClick:e.onCancel,children:"Cancel"})}),Object(r.jsx)(j.j,{span:1}),Object(r.jsx)(j.j,{span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",loading:l,children:"Submit"})})]})})]})},xe=function(){var e=i.a.useState(1),n=Object(d.a)(e,2),t=n[0],a=n[1],o=i.a.useState(10),c=Object(d.a)(o,2),u=c[0],l=c[1],b=i.a.useState(!1),p=Object(d.a)(b,2),h=p[0],f=p[1],m=i.a.useState(null),g=Object(d.a)(m,2),v=g[0],x=g[1],y=i.a.useState(""),S=Object(d.a)(y,2),w=S[0],P=S[1],E=Object(O.useQuery)(je,{variables:{pageSize:u,offset:(t-1)*u,name:w},client:C}),k=E.loading,A=E.error,I=E.data,$=E.refetch;return A?Object(r.jsx)("div",{children:"Something went wrong"}):Object(r.jsxs)(j.s,{title:Object(r.jsxs)(j.b,{children:[Object(r.jsx)(s.a,{to:"/",children:Object(r.jsx)(se.r,{})}),Object(r.jsx)(s.a,{to:"#",children:"Application List"})]}),extra:Object(r.jsx)(j.c,{primary:!0,onClick:function(){return f(!0)},children:"Add Application"}),children:[Object(r.jsxs)(j.o,{data:(null===I||void 0===I?void 0:I.applicationEdge.edges)||[],loading:k,pagination:Object(r.jsx)(j.t,{totalCount:(null===I||void 0===I?void 0:I.applicationEdge.count)||0,currentPage:t,batchSize:u,itemsPerPage:[10,20,30],onChange:function(e,n){a(e),l(n)},justify:"flex-end"}),children:[Object(r.jsx)(j.o.Column,{span:4,header:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.A,{children:"Name"}),Object(r.jsx)(j.u,{preserveOnClose:!0,content:Object(r.jsxs)(j.v,{justifyContent:"flex-end",children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{defaultValue:w,borderless:!0,placeholder:"Press enter to search",onKeyDown:function(e){return"Enter"===e.key&&P(e.target.value)}})}),Object(r.jsx)(j.j,{flex:"0 1 auto",alignSelf:"flex-end",children:Object(r.jsx)(j.c,{primary:!0,flat:!0,onClick:function(){return P("")},children:"Clear"})})]}),children:Object(r.jsx)(j.c,{size:"small",icon:Object(r.jsx)(se.p,{}),secondary:!!w,flat:!0})})]}),children:function(e){return Object(r.jsx)(j.c,{link:!0,flat:!0,primary:!0,onClick:function(){e&&x(e),f(!0)},children:null===e||void 0===e?void 0:e.name})}},"name"),Object(r.jsx)(j.o.Column,{header:"Id",span:4,children:function(e){return Object(r.jsx)(pe,{children:null===e||void 0===e?void 0:e.id})}},"id"),Object(r.jsx)(j.o.Column,{header:"Redirect Url",span:8,children:function(e){return null===e||void 0===e?void 0:e.redirectUrl}},"redirectUrl"),Object(r.jsx)(j.o.Column,{header:"With Organization",span:4,children:function(e){return(null===e||void 0===e?void 0:e.withOrganization)?Object(r.jsx)(se.b,{}):Object(r.jsx)(se.i,{})}},"withOrganization"),Object(r.jsx)(j.o.Column,{header:"Last update",span:4,children:function(e){return e&&Object(r.jsx)(Oe,{children:new Date(null===e||void 0===e?void 0:e.updatedAt)})}},"last update")]}),Object(r.jsx)(j.n,{isVisible:h,style:{container:{width:"500px"}},children:Object(r.jsx)(ve,{application:v||void 0,onCancel:function(){$(),x(null),f(!1)}})})]})},ye=function(){return Object(r.jsx)(s.b,{children:Object(r.jsx)(xe,{path:"/"})})};function Ce(){var e=Object(S.a)(["\n  mutation AddGroup($group: GroupMutationInput!) {\n    addGroup(group: $group) {\n      id\n    }\n  }\n"]);return Ce=function(){return e},e}function Se(){var e=Object(S.a)(["\n  query GroupListQuery($first: Int!, $offset: Int!, $name: String) {\n    groupEdge(first: $first, offset: $offset, nameIContains: $name) {\n      count\n      edges {\n        id\n        name\n        updatedAt\n        permissions\n        features\n        createdBy {\n          email\n          firstName\n        }\n      }\n    }\n  }\n"]);return Se=function(){return e},e}var we=P()(Se()),Pe=P()(Ce());var Ee=function(e){return(n=e,C.mutate({mutation:Pe,variables:{group:n}})).then((function(){Object(j.E)({type:"success",title:"Group Added"})})).catch((function(){return Object(j.E)({type:"error",title:"Something went wrong"})}));var n},ke=function(e){var n=Object(ne.b)({defaultValues:e.group||{name:"",permissions:[],features:[]}}),t=n.handleSubmit,a=n.errors,o=n.control,c=i.a.useState(!1),s=Object(d.a)(c,2),u=s[0],l=s[1];return Object(r.jsxs)(j.e,{elevation:0,children:[Object(r.jsx)(j.g,{children:"Add Group"}),Object(r.jsx)("form",{onSubmit:t((function(n){var t;l(!0),n.id=null===(t=e.group)||void 0===t?void 0:t.id,Ee(n).then((function(){l(!1),e.onCancel()})).catch((function(){return l(!1)}))})),children:Object(r.jsxs)(j.v,{gutter:[0,"10px 0"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Name is required"},control:o,name:"name",render:function(e){var n=e.onChange,t=e.value,i=e.onBlur;return Object(r.jsx)(j.p,{required:!0,label:"Name",onChange:function(e){return n(e.target.value)},value:t,error:a.name,onBlur:i})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"permissions",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(me,{value:i||[],onChange:function(e){return t(e)},error:null===(n=a.permissions)||void 0===n?void 0:n.join(",")})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"features",render:function(e){var n,t=e.value,i=e.onChange;return Object(r.jsx)(j.a,{mode:"multiple",value:t||[],onChange:i,error:null===(n=a.features)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.message})).join(","),listDisplayProp:function(e){return e},uniqueIdentifier:function(e){return e},displayValue:function(e){return e},label:"Select Features",data:function(e){return[e.toUpperCase()]}})}})}),Object(r.jsx)(j.j,{offset:15,span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"danger",onClick:e.onCancel,children:"Cancel"})}),Object(r.jsx)(j.j,{span:1}),Object(r.jsx)(j.j,{span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",loading:u,children:"Submit"})})]})})]})},Ae=function(e){var n=e.first,t=void 0===n?20:n,i=a.useState(1),o=Object(d.a)(i,2),c=o[0],s=o[1],u=a.useState(""),l=Object(d.a)(u,2),b=l[0],p=l[1],h=Object(O.useQuery)(we,{variables:{first:t,offset:20*(c-1),name:b},client:C}),f=h.loading,m=h.error,g=h.data,v=h.refetch;return m?Object(r.jsx)("div",{children:"Something went wrong"}):Object(r.jsx)(j.x,{isLoading:f,render:function(){return Object(r.jsx)("div",{children:e.children({data:g,pageNumber:c,updatePageNumber:s,search:b,updateSearch:p,refetch:v})})}})},Ie=function(e){var n,t;return Object(r.jsxs)(j.o,{data:(null===(n=e.data)||void 0===n?void 0:n.groupEdge.edges)||[],pagination:Object(r.jsx)(j.t,{justify:"flex-end",totalCount:(null===(t=e.data)||void 0===t?void 0:t.groupEdge.count)||0,batchSize:8,currentPage:e.pageNumber,onChange:e.updatePageNumber}),children:[Object(r.jsx)(j.o.Column,{span:6,header:"Name",children:function(n){return Object(r.jsx)(j.c,{flat:!0,primary:!0,link:!0,onClick:function(){return e.onGroupSelect(n||null)},children:null===n||void 0===n?void 0:n.name})}},"name"),Object(r.jsx)(j.o.Column,{span:8,header:"Created By",children:function(e){var n;return null===e||void 0===e||null===(n=e.createdBy)||void 0===n?void 0:n.email}},"createdBy"),Object(r.jsx)(j.o.Column,{span:5,header:"Last update",children:function(e){return e&&Object(r.jsx)(Oe,{children:new Date(null===e||void 0===e?void 0:e.updatedAt)})}},"lastupdate")]})},$e=function(e){var n=Object(a.useState)(!1),t=Object(d.a)(n,2),i=t[0],o=t[1],c=Object(a.useState)(null),u=Object(d.a)(c,2),b=u[0],p=u[1];return Object(r.jsx)(j.s,{title:Object(r.jsxs)(j.b,{children:[Object(r.jsx)(s.a,{to:"/",children:Object(r.jsx)(se.r,{})}),Object(r.jsx)(s.a,{to:"#",children:"Group List"})]}),extra:Object(r.jsx)(j.c,{primary:!0,onClick:function(){return o(!0)},children:"Add Group"}),children:Object(r.jsx)(Ae,{children:function(n){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ie,Object(l.a)(Object(l.a)(Object(l.a)({},n),e),{},{onGroupSelect:function(e){p(e),e&&o(!0)}})),Object(r.jsx)(j.n,{style:{container:{width:"500px"}},isVisible:i,children:Object(r.jsx)(ke,{group:b||void 0,onCancel:function(){n.refetch(),p(null),o(!1)}})})]})}})})},Ne=function(){return Object(r.jsx)(s.b,{children:Object(r.jsx)($e,{path:"/"})})};function Ue(){var e=Object(S.a)(["\n  mutation AddOrganizationMutation($organization: OrganizationMutationInput!) {\n    addOrganization(organization: $organization) {\n      id\n      name\n      address\n      contact\n      gstCode\n      gstRate\n      hsnCode\n      amtReady\n      amtPerPointSale\n      features\n      updatedAt\n      users\n    }\n  }\n"]);return Ue=function(){return e},e}function ze(){var e=Object(S.a)(["\n  query OrganizationListQuery($first: Int, $offset: Int, $name: String) {\n    organizationEdge(first: $first, offset: $offset, nameIContains: $name) {\n      count\n      edges {\n        id\n        name\n        address\n        contact\n        gstCode\n        gstRate\n        hsnCode\n        amtPerPointSale\n        amtReady\n        features\n        updatedAt\n        users\n      }\n    }\n  }\n"]);return ze=function(){return e},e}var De=P()(ze()),Le=P()(Ue());var qe=function(){var e=Object(h.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.query({query:H,variables:{email:n},errorPolicy:"all"});case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,n){t.data&&e(t.data.userEdge.edges),t.errors&&n(t.errors)})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Be=function(e){return Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({},e),{},{data:qe,uniqueIdentifier:function(e){return e.id||e},listDisplayProp:function(e){return"".concat(e.email,", ").concat(e.id)},displayValue:function(e){return(null===e||void 0===e?void 0:e.email)||e},clearable:!1,searchValue:function(e){return null===e||void 0===e?void 0:e.email},label:"Select User"}))},Te=function(e){return(n=e,C.mutate({mutation:Le,variables:{organization:n},errorPolicy:"all"})).then((function(){Object(j.E)({type:"success",title:"Organization Added"})})).catch((function(){return Object(j.E)({type:"error",title:"Something went wrong"})}));var n},Re=function(e){var n=Object(ne.b)({defaultValues:e.organization||{name:"",features:[],users:[]}}),t=n.handleSubmit,a=n.errors,o=n.control,c=i.a.useState(!1),s=Object(d.a)(c,2),u=s[0],l=s[1];return Object(r.jsxs)(j.e,{elevation:0,children:[Object(r.jsx)(j.g,{children:"Add Organization"}),Object(r.jsx)("form",{onSubmit:t((function(n){var t;l(!0),n.id=null===(t=e.organization)||void 0===t?void 0:t.id,Te(n).then((function(){l(!1),e.onCancel()})).catch((function(){return l(!1)}))})),children:Object(r.jsxs)(j.v,{gutter:[0,"10px 0"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{rules:{required:"Name is required"},control:o,name:"name",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{required:!0,label:"Name",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.name)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"contact",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"Contact",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.contact)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"gstCode",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"GST Code",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.gstCode)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"gstRate",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"GST Rate",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.gstRate)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"hsnCode",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"HSN Code",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.hsnCode)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"amtPerPointSale",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"Amount Per Point Sale",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.amtPerPointSale)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"amtReady",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.p,{label:"Amount Ready",onChange:function(e){return t(e.target.value)},value:i,error:null===(n=a.amtReady)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"address",render:function(e){var n,t=e.onChange,i=e.value;return Object(r.jsx)(j.B,{label:"Address",onChange:t,value:i,error:null===(n=a.address)||void 0===n?void 0:n.message})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"features",render:function(e){var n,t=e.value,i=e.onChange;return Object(r.jsx)(j.a,{mode:"multiple",value:t||[],onChange:i,error:null===(n=a.features)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.message})).join(","),listDisplayProp:function(e){return e},uniqueIdentifier:function(e){return e},displayValue:function(e){return e},label:"Select Features",data:function(e){return[e.toUpperCase()]}})}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(ne.a,{control:o,name:"users",render:function(e){var n=e.value,t=e.onChange;return Object(r.jsx)(Be,{mode:"multiple",value:n||[],onChange:function(e){return t(e.map((function(e){return e.id||e})))}})}})}),Object(r.jsx)(j.j,{offset:15,span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"danger",onClick:e.onCancel,children:"Cancel"})}),Object(r.jsx)(j.j,{span:1}),Object(r.jsx)(j.j,{span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",loading:u,children:"Submit"})})]})})]})},_e=function(){var e=i.a.useState(1),n=Object(d.a)(e,2),t=n[0],a=n[1],o=i.a.useState(10),c=Object(d.a)(o,2),u=c[0],l=c[1],b=i.a.useState(!1),p=Object(d.a)(b,2),h=p[0],f=p[1],m=i.a.useState(null),g=Object(d.a)(m,2),v=g[0],x=g[1],y=i.a.useState(""),S=Object(d.a)(y,2),w=S[0],P=S[1],E=Object(O.useQuery)(De,{variables:{pageSize:u,offset:(t-1)*u,name:w},client:C}),k=E.loading,A=E.error,I=E.data,$=E.refetch;return A?Object(r.jsx)("div",{children:"Something went wrong"}):Object(r.jsxs)(j.s,{title:Object(r.jsxs)(j.b,{children:[Object(r.jsx)(s.a,{to:"/",children:Object(r.jsx)(se.r,{})}),Object(r.jsx)(s.a,{to:"#",children:"Organization List"})]}),extra:Object(r.jsx)(j.c,{primary:!0,onClick:function(){return f(!0)},children:"Add Organization"}),children:[Object(r.jsxs)(j.o,{data:(null===I||void 0===I?void 0:I.organizationEdge.edges)||[],loading:k,pagination:Object(r.jsx)(j.t,{totalCount:(null===I||void 0===I?void 0:I.organizationEdge.count)||0,currentPage:t,batchSize:u,itemsPerPage:[10,20,30],onChange:function(e,n){a(e),l(n)},justify:"flex-end"}),children:[Object(r.jsx)(j.o.Column,{span:4,header:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.A,{children:"Name"}),Object(r.jsx)(j.u,{preserveOnClose:!0,content:Object(r.jsxs)(j.v,{justifyContent:"flex-end",children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{defaultValue:w,borderless:!0,placeholder:"Press enter to search",onKeyDown:function(e){return"Enter"===e.key&&P(e.target.value)}})}),Object(r.jsx)(j.j,{flex:"0 1 auto",alignSelf:"flex-end",children:Object(r.jsx)(j.c,{primary:!0,flat:!0,onClick:function(){return P("")},children:"Clear"})})]}),children:Object(r.jsx)(j.c,{size:"small",icon:Object(r.jsx)(se.p,{}),secondary:!!w,flat:!0})})]}),children:function(e){return Object(r.jsx)(j.c,{link:!0,flat:!0,primary:!0,onClick:function(){e&&x(e),f(!0)},children:null===e||void 0===e?void 0:e.name})}},"name"),Object(r.jsx)(j.o.Column,{header:"Contact",span:6,children:function(e){return null===e||void 0===e?void 0:e.contact}},"contact"),Object(r.jsx)(j.o.Column,{header:"Address",span:10,children:function(e){return null===e||void 0===e?void 0:e.address}},"address"),Object(r.jsx)(j.o.Column,{header:"Last update",span:4,children:function(e){return e&&Object(r.jsx)(Oe,{children:new Date(null===e||void 0===e?void 0:e.updatedAt)})}},"last update")]}),Object(r.jsx)(j.n,{style:{container:{width:"500px"}},isVisible:h,children:Object(r.jsx)(Re,{organization:v||void 0,onCancel:function(){$(),x(null),f(!1)}})})]})},Fe=function(){return Object(r.jsx)(s.b,{children:Object(r.jsx)(_e,{path:"/"})})},Ge=t(38),Me=t(39),Ve=t(40),He=t(43),Qe=t(42),Ke=function(e){Object(He.a)(t,e);var n=Object(Qe.a)(t);function t(e){var r;return Object(Me.a)(this,t),(r=n.call(this,e)).onChange=function(e,n){r.setState({value:Object(l.a)(Object(l.a)({},r.state.value),{},Object(Ge.a)({},e,n))})},r.onSubmit=function(){var e;(e=r.state.value,C.mutate({mutation:T,variables:{user:e},errorPolicy:"all"})).then((function(){return Object(j.E)({title:"User Details Updated",type:"success"})})).then((function(){return r.props.onCancel()})).catch((function(){return Object(j.E)({title:"Something went wrong",type:"error"})}))},r.state={value:e.user,error:{},isError:!1},r}return Object(Ve.a)(t,[{key:"render",value:function(){var e=this,n=this.state,t=n.value,a=n.error,i=n.isError;return Object(r.jsxs)(j.e,{elevation:0,children:[Object(r.jsx)(j.g,{subtitle:"Update personal details",children:"User Personal Details Form"}),Object(r.jsx)(j.f,{children:Object(r.jsxs)(j.v,{gutter:[0,"10px"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{value:t.firstName,label:"First Name",error:a.firstName,onChange:function(n){return e.onChange("firstName",n.target.value)}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{value:t.middleName,label:"Middle Name",error:a.middleName,onChange:function(n){return e.onChange("middleName",n.target.value)}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{value:t.lastName,label:"Last Name",error:a.lastName,onChange:function(n){return e.onChange("lastName",n.target.value)}})}),Object(r.jsx)(j.j,{offset:16,span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"danger",onClick:this.props.onCancel,children:"Cancel"})}),Object(r.jsx)(j.j,{span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",onClick:this.onSubmit,disabled:i,children:"Submit"})})]})})]})}}]),t}(a.Component),We=function(e){var n=a.useState({password:"",confirmPassword:"",error:""}),t=Object(d.a)(n,2),i=t[0],o=t[1];return Object(r.jsxs)(j.v,{gutter:[0,"10px"],children:[Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{type:"password",label:"Password",placeholder:"Enter your Password",before:Object(r.jsx)(f.a,{}),value:i.password,onChange:function(e){var n=e.target.value;return o(Object(l.a)(Object(l.a)({},i),{},{password:n}))}})}),Object(r.jsx)(j.j,{children:Object(r.jsx)(j.p,{type:"password",label:"Confirrm Password",placeholder:"Re-enter Password",before:Object(r.jsx)(f.a,{}),value:i.confirmPassword,onChange:function(e){var n=e.target.value;return o(Object(l.a)(Object(l.a)({},i),{},{confirmPassword:n}))},error:i.error})}),Object(r.jsx)(j.j,{offset:16,span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"danger",onClick:e.onCancel,children:"Cancel"})}),Object(r.jsx)(j.j,{span:4,children:Object(r.jsx)(j.c,{displayBlock:!0,type:"primary",onClick:function(){var n,t;(n=e.userId,t=i.password,C.mutate({mutation:V,variables:{userId:n,password:t},errorPolicy:"all"})).then((function(){return Object(j.E)({type:"success",title:"Password Updated"})})).then((function(){return e.onCancel()})).catch((function(){return Object(j.E)({type:"error",title:"Something went wrong"})}))},disabled:!!i.error,children:"Submit"})})]})},Je=t(29),Xe=t(7),Ye=function(e){return e.image?Object(r.jsx)(j.h,{image:e.image,height:"200px",style:e.style}):Object(r.jsx)(u.b,{children:function(n){return Object(r.jsx)("div",{style:Object(l.a)(Object(l.a)({},e.style||{}),{},{background:n.secondary,boxShadow:Object(Je.a)("2X",n),display:"flex",alignItems:"center",justifyContent:"center"}),children:Object(r.jsx)("h1",{style:{textAlign:"center",color:Object(Xe.c)(n.secondary)},children:e.email.slice(0,2).toUpperCase()})})}})},Ze=function(e,n,t){(function(e,n){return C.mutate({mutation:G,variables:{userId:e,groups:n},errorPolicy:"all"})})(e,n).then((function(){return Object(j.E)({type:"success",title:"Groups Updated"})})).then(t).catch((function(){return Object(j.E)({type:"error",title:"Error updating groups"})}))},en=function(e,n,t){(function(e,n){return C.mutate({mutation:M,variables:{userId:e,permissions:n},errorPolicy:"all"})})(e,n).then((function(){return Object(j.E)({type:"success",title:"Permissions Updated"})})).then(t).catch((function(){return Object(j.E)({type:"error",title:"Error updating permissions"})}))},nn=function(e,n,t){(function(e,n){return C.mutate({mutation:Q,variables:{userId:e,app:n},errorPolicy:"all"})})(e,n).then((function(){return Object(j.E)({type:"success",title:"Access Granted"})})).then(t).catch((function(){return Object(j.E)({type:"error",title:"Error updating permissions"})}))},tn=function(e,n,t){(function(e,n){return C.mutate({mutation:K,variables:{userId:e,app:n},errorPolicy:"all"})})(e,n).then((function(){return Object(j.E)({type:"success",title:"Access Removed"})})).then(t).catch((function(){return Object(j.E)({type:"error",title:"Error updating permissions"})}))},rn=function(e){var n=e.id,t=Object(O.useQuery)(_,{variables:{id:n},client:C}),i=t.loading,o=t.error,c=t.data,s=t.refetch,u=a.useState(!1),l=Object(d.a)(u,2),b=l[0],p=l[1],h=a.useState(!1),f=Object(d.a)(h,2),m=f[0],g=f[1];return o?Object(r.jsx)("div",{children:"something went wrong"}):Object(r.jsx)(j.v,{style:{height:"100vh"},justifyContent:"center",children:Object(r.jsx)(j.j,{style:{paddingTop:"100px",width:"1000px"},flex:"0 1 1200px",children:Object(r.jsx)(j.x,{isLoading:i,render:function(){var e;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(j.e,{style:{borderRadius:"10px"},children:[Object(r.jsx)(Ye,{image:null===c||void 0===c?void 0:c.user.image,email:(null===c||void 0===c?void 0:c.user.email)||"",style:{width:"200px",borderRadius:"50%",margin:"auto",marginTop:"-100px",height:"200px"}}),Object(r.jsxs)(j.g,{style:{textAlign:"center"},subtitle:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:null===c||void 0===c?void 0:c.user.email}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"ID:"}),Object(r.jsx)("span",{children:null===c||void 0===c?void 0:c.user.id})]})]}),children:[null===c||void 0===c?void 0:c.user.firstName," ",null===c||void 0===c?void 0:c.user.middleName," ",null===c||void 0===c?void 0:c.user.lastName]}),Object(r.jsx)(j.f,{children:Object(r.jsxs)(j.v,{justifyContent:"flex-end",children:[Object(r.jsx)(j.j,{flex:"0 1 auto",children:Object(r.jsx)(j.c,{flat:!0,type:"secondary",onClick:function(){return g(!0)},children:"Change Password"})}),Object(r.jsx)(j.j,{flex:"0 1 auto",children:Object(r.jsx)(j.c,{onClick:function(){return p(!0)},flat:!0,type:"secondary",children:"Update Personal Details"})})]})})]}),Object(r.jsxs)(j.e,{style:{marginTop:"20px"},children:[Object(r.jsx)(j.g,{subtitle:"Applications"}),Object(r.jsx)(j.D,{values:null===c||void 0===c||null===(e=c.user.applicationEdge)||void 0===e?void 0:e.edges,displayValue:function(e){return e.name},uniqueIdentifier:function(e){return e.id},listDisplayProp:function(e){return e.name},data:function(){return C.query({query:je}).then((function(e){return e.data.applicationEdge.edges}))},onChange:function(e){var n;return function(e,n,t,r){var a=n.find((function(e){return e.updatedAt}));if(a)return nn(t,a.id,r);var i=e.find((function(e){return!n.find((function(n){return n.id===e.id}))}));return i?tn(t,i.id,r):void 0}(null===c||void 0===c||null===(n=c.user.applicationEdge)||void 0===n?void 0:n.edges,e,(null===c||void 0===c?void 0:c.user.id)||"",s)}})]}),Object(r.jsxs)(j.e,{style:{marginTop:"20px"},children:[Object(r.jsx)(j.g,{subtitle:"User groups"}),Object(r.jsx)(Ae,{first:1e4,children:function(e){var n;return Object(r.jsx)(j.D,{values:null===c||void 0===c||null===(n=c.user.groupsEdge)||void 0===n?void 0:n.edges,displayValue:function(e){return e.name},uniqueIdentifier:function(e){return e.id},listDisplayProp:function(e){return e.name},data:function(){var n;return(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.groupEdge.edges)||[]},onChange:function(e){return(null===c||void 0===c?void 0:c.user)&&Ze(null===c||void 0===c?void 0:c.user.id,e.map((function(e){return e.id})),s)}})}})]}),Object(r.jsxs)(j.e,{style:{marginTop:"20px"},children:[Object(r.jsx)(j.g,{subtitle:"User Permissions"}),Object(r.jsx)(j.D,{values:(null===c||void 0===c?void 0:c.user.permissions)||[],displayValue:function(e){return e},uniqueIdentifier:function(e){return e},listDisplayProp:function(e){return e},data:function(){return Object.keys(fe)},onChange:function(e){return(null===c||void 0===c?void 0:c.user)&&en(null===c||void 0===c?void 0:c.user.id,e,s)}})]}),Object(r.jsx)(j.n,{style:{container:{width:"500px"}},onClose:function(){return p(!1)},isVisible:b,children:Object(r.jsx)(Ke,{onCancel:function(){s(),p(!1)},user:{id:null===c||void 0===c?void 0:c.user.id,email:(null===c||void 0===c?void 0:c.user.email)||"",firstName:(null===c||void 0===c?void 0:c.user.firstName)||"",middleName:(null===c||void 0===c?void 0:c.user.middleName)||"",lastName:(null===c||void 0===c?void 0:c.user.lastName)||""}})}),Object(r.jsx)(j.n,{style:{container:{width:"500px"}},onClose:function(){return g(!1)},isVisible:m,children:Object(r.jsx)(We,{onCancel:function(){s(),g(!1)},userId:(null===c||void 0===c?void 0:c.user.id)||""})})]})}})})})},an=function(){var e=i.a.useState(1),n=Object(d.a)(e,2),t=n[0],a=n[1],o=i.a.useState(10),c=Object(d.a)(o,2),u=c[0],l=c[1],b=i.a.useState(""),p=Object(d.a)(b,1)[0],h=Object(O.useQuery)(W,{variables:{pageSize:u,offset:(t-1)*u,name:p},client:C}),f=h.loading,m=h.error,g=h.data;return m?Object(r.jsx)("div",{children:"Something went wrong"}):Object(r.jsx)(j.s,{title:Object(r.jsxs)(j.b,{children:[Object(r.jsx)(s.a,{to:"/",children:Object(r.jsx)(se.r,{})}),Object(r.jsx)(s.a,{to:"#",children:"Users List"})]}),extra:Object(r.jsx)(j.c,{primary:!0,component:Object(r.jsx)(s.a,{to:"add"}),children:"Add Users"}),children:Object(r.jsxs)(j.o,{pagination:Object(r.jsx)(j.t,{totalCount:(null===g||void 0===g?void 0:g.userEdge.count)||0,currentPage:t,batchSize:u,itemsPerPage:[10,20,30],onChange:function(e,n){a(e),l(n)},justify:"flex-end"}),data:(null===g||void 0===g?void 0:g.userEdge.edges)||[],loading:f,children:[Object(r.jsx)(j.o.Column,{header:"Name",span:6,children:function(e){return Object(r.jsxs)(j.c,{primary:!0,link:!0,flat:!0,component:Object(r.jsx)(s.a,{to:(null===e||void 0===e?void 0:e.id)||"#"}),children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.middleName," ",null===e||void 0===e?void 0:e.lastName]})}},"name"),Object(r.jsx)(j.o.Column,{header:"Email",span:6,children:function(e){return null===e||void 0===e?void 0:e.email}},"email"),Object(r.jsx)(j.o.Column,{header:"Last Login",span:3,children:function(e){return(null===e||void 0===e?void 0:e.lastLogin)?Object(r.jsx)(Oe,{children:new Date(null===e||void 0===e?void 0:e.lastLogin)}):"-"}},"last login"),Object(r.jsx)(j.o.Column,{header:"Defaul Organization",span:8,children:function(e){var n;return null===e||void 0===e||null===(n=e.defaultOrganization)||void 0===n?void 0:n.name}},"do")]})})},on=function(){return Object(r.jsxs)(s.b,{children:[Object(r.jsx)(an,{path:"/"}),Object(r.jsx)(rn,{path:":id"})]})},cn=function(){return Object(r.jsx)("div",{children:"Home"})},sn=function(){var e=Object(a.useState)(null),n=Object(d.a)(e,2),t=(n[0],n[1]);return Object(a.useEffect)((function(){(function(){return ee.apply(this,arguments)})().then((function(e){return t(e)}))}),[]),Object(r.jsxs)(j.k,{children:[Object(r.jsxs)(j.w,{bottom:Object(r.jsx)(j.C,{overlay:"Logout",children:Object(r.jsx)(j.c,{flat:!0,displayBlock:!0,size:"big",onClick:Y,icon:Object(r.jsx)(f.b,{})})}),logo:Object(r.jsx)(ue.a,{size:"50px",style:{background:"var(--primary)"}}),children:[Object(r.jsx)(j.C,{overlay:"Users",placement:"right",children:Object(r.jsx)(j.c,{primary:location.href.includes("users"),flat:!0,displayBlock:!0,size:"big",icon:Object(r.jsx)(se.w,{}),component:Object(r.jsx)(s.a,{to:"users"})})}),Object(r.jsx)(j.C,{overlay:"Groups",placement:"right",children:Object(r.jsx)(j.c,{primary:location.href.includes("groups"),flat:!0,displayBlock:!0,size:"big",icon:Object(r.jsx)(se.q,{}),component:Object(r.jsx)(s.a,{to:"groups"})})}),Object(r.jsx)(j.C,{overlay:"Organization",placement:"right",children:Object(r.jsx)(j.c,{primary:location.href.includes("organizations"),flat:!0,displayBlock:!0,size:"big",icon:Object(r.jsx)(se.k,{}),component:Object(r.jsx)(s.a,{to:"organizations"})})}),Object(r.jsx)(j.C,{overlay:"Application",placement:"right",children:Object(r.jsx)(j.c,{primary:location.href.includes("applications"),flat:!0,displayBlock:!0,size:"big",icon:Object(r.jsx)(se.a,{}),component:Object(r.jsx)(s.a,{to:"applications"})})})]}),Object(r.jsx)(j.l,{children:Object(r.jsxs)(s.b,{children:[Object(r.jsx)(cn,{path:"/"}),Object(r.jsx)(on,{path:"users/*"}),Object(r.jsx)(Ne,{path:"groups/*"}),Object(r.jsx)(Fe,{path:"organizations/*"}),Object(r.jsx)(ye,{path:"applications/*"})]})})]})};var un=function(){return Object(r.jsx)(u.c,{theme:"LIGHT",children:Object(r.jsxs)(s.b,{children:[Object(r.jsx)(ce,{path:"/"}),Object(r.jsx)(sn,{path:"/dashboard/*"})]})})},ln=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,135)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),i(e),o(e)}))};c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(un,{})}),document.getElementById("root")),ln()}},[[132,1,2]]]);
//# sourceMappingURL=main.1a558162.chunk.js.map